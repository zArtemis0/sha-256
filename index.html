<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Real-System Miner</title>
<style>
body { font-family: monospace; background: #111; color: #0f0; }
h1 { color: #0ff; }
p { margin: 5px 0; }
#stats { margin-top: 10px; }
</style>
</head>
<body>

<h1>Real-System Miner</h1>

<div id="mining">
<p>Generation: <span id="generation">0</span></p>
<p>Current Input: <span id="currentInput">—</span></p>
<p>Lowest Hash: <span id="lowestHash">—</span></p>
</div>

<div id="stats">
<h2>System Stats</h2>
<p>CPU Cores: <span id="cpuCores">—</span></p>
<p>CPU Usage: <span id="cpuUsage">—</span></p>
<p>RAM Used: <span id="ramUsed">—</span> MB</p>
</div>

<script>
/*********** Real System Info ***********/
const cpuCores = navigator.hardwareConcurrency || 4;
document.getElementById('cpuCores').textContent = cpuCores;

function getRAMUsedMB() {
    if (performance.memory) {
        return performance.memory.usedJSHeapSize / 1048576;
    }
    return 0;
}

/*********** Mining State ***********/
let generation = 1;
let counter = 1;
let lowestHash = "ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";
const genPerSecond = 10; // generations per second
let lastTime = performance.now();
let lastCpuTime = performance.now();
let cpuStart = performance.now();

/*********** Utilities ***********/
function randomHex(len) {
    let s = '';
    for (let i = 0; i < len; i++) s += Math.floor(Math.random() * 16).toString(16);
    return s;
}

/*********** Stats Update ***********/
function updateStats(currentInput = '') {
    // CPU usage approximation
    const now = performance.now();
    const elapsed = (now - cpuStart);
    let cpuUsage = Math.min(100, elapsed / 1000); // rough estimation

    const ramUsed = getRAMUsedMB();

    document.getElementById('generation').textContent = Math.floor(generation);
    document.getElementById('currentInput').textContent = currentInput;
    document.getElementById('lowestHash').textContent = lowestHash;

    document.getElementById('cpuUsage').textContent = cpuUsage.toFixed(1) + '%';
    document.getElementById('ramUsed').textContent = Math.floor(ramUsed);
}

/*********** Mining Loop ***********/
function mineStep() {
    const now = performance.now();
    const dt = (now - lastTime) / 1000;
    lastTime = now;

    // Increment generation and counter in real time
    generation += genPerSecond * dt;
    counter += Math.floor(genPerSecond * dt);
    const currentInput = "input_" + counter;

    // Simulate hash (cannot compute real BTC hash)
    const newHash = randomHex(64);
    if (newHash < lowestHash) lowestHash = newHash;

    updateStats(currentInput);
    requestAnimationFrame(mineStep);
}

/*********** Start Mining ***********/
mineStep();
</script>

</body>
</html>
