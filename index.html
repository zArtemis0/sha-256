<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Safe Real-Time Miner</title>
<style>
body { font-family: monospace; background: #111; color: #0f0; }
h1 { color: #0ff; }
p { margin: 5px 0; }
#stats { margin-top: 10px; }
</style>
</head>
<body>

<h1>Safe Real-Time Miner</h1>

<div id="mining">
<p>Generation: <span id="generation">0</span></p>
<p>Current Input: <span id="currentInput">—</span></p>
<p>Lowest Hash: <span id="lowestHash">—</span></p>
</div>

<div id="stats">
<h2>System Stats</h2>
<p>CPU Cores: <span id="cpuCores">—</span></p>
<p>CPU Usage: <span id="cpuUsage">—</span></p>
<p>GPU Activity: <span id="gpuUsage">—</span></p>
<p>RAM Used: <span id="ramUsed">—</span> MB</p>
<p>Estimated Power: <span id="power">—</span> W</p>
</div>

<script>
/*********** State ***********/
let generation = 1;
let lowestHash = "ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";
let counter = 1;
const cpuCores = navigator.hardwareConcurrency || 4;
document.getElementById('cpuCores').textContent = cpuCores;

let cpuUsage = 5;
let gpuUsage = 1;
let ramUsed = 512;

const genPerSecond = 10; // generations per second

/*********** Utilities ***********/
function randomHex(len) {
    let s = '';
    for(let i=0;i<len;i++) s += Math.floor(Math.random()*16).toString(16);
    return s;
}

/*********** Stats Update ***********/
function updateStats(currentInput=''){
    document.getElementById('generation').textContent = Math.floor(generation);
    document.getElementById('currentInput').textContent = currentInput;
    document.getElementById('lowestHash').textContent = lowestHash;

    document.getElementById('cpuUsage').textContent = cpuUsage.toFixed(1) + "%";
    document.getElementById('gpuUsage').textContent = gpuUsage.toFixed(1) + "k h/s";
    document.getElementById('ramUsed').textContent = Math.floor(ramUsed);
    document.getElementById('power').textContent = (cpuUsage*0.7 + gpuUsage*2.0).toFixed(1) + " W";
}

/*********** Mining Loop ***********/
let lastTime = performance.now();

function mineStep() {
    const now = performance.now();
    const dt = (now - lastTime)/1000; // seconds
    lastTime = now;

    // Increment generation and counter based on real time
    generation += genPerSecond * dt;
    counter += Math.floor(genPerSecond * dt);

    // Simulate current input
    const currentInput = "input_" + counter;

    // Random lowest hash simulation
    let newHash = randomHex(64);
    if(newHash < lowestHash) lowestHash = newHash;

    // Slowly ramp CPU/GPU/RAM
    cpuUsage = Math.min(100, cpuUsage + 5 * dt);
    gpuUsage = Math.min(100, gpuUsage + 10 * dt);
    ramUsed = Math.min(16000, ramUsed + 50 * dt);

    updateStats(currentInput);
    requestAnimationFrame(mineStep);
}

/*********** Start Mining ***********/
mineStep();
</script>

</body>
</html>
